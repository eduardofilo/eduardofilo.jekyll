---
layout: post
title: "Otto DIY"
date: 2018-05-05 17:25:00
published: true
---

# Otto
<iframe width="854" height="480" src="https://www.youtube.com/embed/AOQpcEnxrAU" frameborder="0" allowfullscreen></iframe>

En este artículo se detallan las piezas hardware, software e información conveniente para montar y poner en marcha el robot [Otto](https://www.ottodiy.com/).

## Enlaces

* OttoDIY:
    * [OttoDIY/DIY - Github](https://github.com/OttoDIY/DIY)
    * [OttoDIY/DIY - Instructables](http://www.instructables.com/id/Otto-Build-You-Own-Robot-in-Two-Hours/)
    * [OttoDIY/DIY - Thingiverse](https://www.thingiverse.com/thing:1568652)

* OttoDIY+:
    * [OttoDIY/PLUS - Github](https://github.com/OttoDIY/PLUS)
    * [OttoDIY/PLUS - Instructables](http://www.instructables.com/id/Otto-DIY-Arduino-Bluetooth-Robot-Easy-to-3Dprint/)
    * [OttoDIY/PLUS - Thingiverse](https://www.thingiverse.com/thing:2398231)

## Componentes

### OttoDIY

* [Cable de pin hembra-hembra](https://es.aliexpress.com/item/Electrical-Cables-40pcs-20cm-2-54mm-1p-1p-Pin-Female-to-Female-Color-Breadboard-Cable-Jump/32697942452.html?spm=a2g0s.9042311.0.0.7Nhulo)
* [Pulsador ON/OFF](https://es.aliexpress.com/item/20pcs-6Pin-Push-Tactile-Power-Micro-Switch-Self-lock-On-Off-button-Latching-switch-8x8mm-8/32700801500.html?spm=a2g0s.9042311.0.0.7Nhulo)
* [Portapilas AAx4](https://es.aliexpress.com/item/Professional-4pcs-DIY-Double-Sides-4-x-AA-Battery-Case-Holder-Box-Container/32690113808.html?spm=a2g0s.9042311.0.0.7Nhulo)
* [Shield Arduino Nano](https://es.aliexpress.com/item/1pcs-UNO-Shield-Nano-Shield-for-NANO-3-0-and-UNO-R3-duemilanove-2009-Expansion-board/32346681480.html?spm=a2g0s.9042311.0.0.7Nhulo)
* [Módulo sensor Ultrasonidos HC-SR04](https://es.aliexpress.com/item/Ultrasonic-Module-HC-SR04-Distance-Measuring-Transducer-Sensor/32477198302.html?spm=a2g0s.9042311.0.0.7Nhulo)
* [Servo SG90](https://es.aliexpress.com/item/1PCS-Black-SG90-Pro-9g-micro-servo-for-airplane-aeroplane-6CH-rc-helcopter-kds-esky-align/32847760541.html?spm=a2g0s.9042311.0.0.7Nhulo): 4 unidades
* [Zumbador 5V](https://es.aliexpress.com/item/10pcs-Pengiriman-gratis-A-body-Active-buzzer-5-v-dc-long-sound-TMB12A05-long-sound-12/32393615353.html?spm=a2g0s.9042311.0.0.7Nhulo)
* [Arduino Nano 328p](https://es.aliexpress.com/store/product/1-unids-nano-3-0-controlador-compatible-con-nano-CH340-USB-conductor-ning-n-cable/1022067_32831041825.html)

### OttoDIY+

* [Pulsaodor táctil TTP223B](https://es.aliexpress.com/item/1PCS-TTP223B-Digital-Touch-Sensor-Capacitive-Touch-Switch-Module-DIY-For-Arduino/1981330366.html?spm=a2g0s.9042311.0.0.7Nhulo): 3 unidades
* [Módulo Bluetooth HC-05](https://es.aliexpress.com/item/HC05-HC-05-master-slave-6pin-JY-MCU-anti-reverse-integrated-Bluetooth-serial-pass-through-module/32340945238.html?spm=a2g0s.9042311.0.0.7Nhulo)
* [Matriz LED MAX7219](https://es.aliexpress.com/item/MAX7219-dot-matrix-module-microcontroller-module-DIY-KIT-hei/32580544054.html?spm=a2g0s.9042311.0.0.7Nhulo)

## Montaje

Las piezas impresas se pueden obtener del repositorio GitHub en el directorio [3D print](https://github.com/OttoDIY/DIY/tree/master/3D%20print).

Para el montaje seguir el PDF incluido en la raíz del repositorio GitHub (en el momento de escribir este artículo era la [versión 07](https://github.com/OttoDIY/DIY/blob/master/OttoDIY_InstructionsManual_V07.pdf)).

## Calibración

Cargar el siguiente programa para averiguar los ajustes de trim para cuadrar el robot:

```c
//----------------------------------------------------------------
//-- Otto Dance smooth criminal by Michael Jackson
//-- Released under a GPL licencse (http://ottodiy.com)
//-- Originally made for Zowi project remake for Otto DIY
//-- Authors:  Javier Isabel:  javier.isabel@bq.com
//--           Juan Gonzalez (obijuan): juan.gonzalez@bq.com
//-----------------------------------------------------------------
#include <Servo.h>
#include <Oscillator.h>
#include <EEPROM.h>

#define N_SERVOS 4
//-- First step: Configure the pins where the servos are attached
/*
         --------------- 
        |     O   O     |
        |---------------|
YR 3==> |               | <== YL 2
         --------------- 
            ||     ||
            ||     ||
RR 5==>   -----   ------  <== RL 4
         |-----   ------|
*/

#define TRIM_RR 6
#define TRIM_RL -3
#define TRIM_YR  9
#define TRIM_YL 3

#define PIN_RR 5
#define PIN_RL 4
#define PIN_YR 3
#define PIN_YL 2

#define INTERVALTIME 10.0 

Oscillator servo[N_SERVOS];

void setup() {
  servo[0].attach(PIN_RR);
  servo[1].attach(PIN_RL);
  servo[2].attach(PIN_YR);
  servo[3].attach(PIN_YL);
  
  servo[0].SetTrim(TRIM_RR);
  servo[1].SetTrim(TRIM_RL);
  servo[2].SetTrim(TRIM_YR);
  servo[3].SetTrim(TRIM_YL);
  
  for(int i=0;i<4;i++) servo[i].SetPosition(90);
}

void loop() {
}
```

Por medio de ensayo/error identificar los valores de `TRIM_RR`, `TRIM_RL`, `TRIM_YR` y `TRIM_YL` que hacen que las cuatro articulaciones queden perfectamente cuadradas.

Cargar el siguiente sketch para almacenar los valores obtenidos en la EEPROM:

```c
#include <EEPROM.h>
#define EEPROM_BASE_ADDRESS 0

#define TRIM_RR 6
#define TRIM_RL -3
#define TRIM_YR  9
#define TRIM_YL 3

void setup() {
  EEPROM.write(EEPROM_BASE_ADDRESS, TRIM_RR);
  EEPROM.write(EEPROM_BASE_ADDRESS+1, TRIM_RL);
  EEPROM.write(EEPROM_BASE_ADDRESS+2, TRIM_YR);
  EEPROM.write(EEPROM_BASE_ADDRESS+3, TRIM_YL);
}

void loop() {
}
```

A partir de entonces habrá que activar la opción que tienen los sketches para tomar los valores de trim de la EEPROM. Por ejemplo en el `Otto_smooth_criminal` hay que cambiar la línea 25:

```
#define EEPROM_TRIM true 
```