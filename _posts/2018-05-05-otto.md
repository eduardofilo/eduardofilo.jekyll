---
layout: post
title: "Otto DIY"
date: 2018-05-05 17:25:00
published: true
---

# Otto
<iframe width="854" height="480" src="https://www.youtube.com/embed/AOQpcEnxrAU" frameborder="0" allowfullscreen></iframe>

## Enlaces

* OttoDIY:
    * [OttoDIY/DIY - Github](https://github.com/OttoDIY/DIY)
    * [OttoDIY/DIY - Instructables](http://www.instructables.com/id/Otto-Build-You-Own-Robot-in-Two-Hours/)

* OttoDIY+:
    * [OttoDIY/PLUS - Github](https://github.com/OttoDIY/PLUS)
    * [OttoDIY/PLUS - Instructables](http://www.instructables.com/id/Otto-DIY-Arduino-Bluetooth-Robot-Easy-to-3Dprint/)

## Calibración

Cargar el siguiente programa para averiguar los ajustes de trim para cuadrar el robot:

```c
//----------------------------------------------------------------
//-- Otto Dance smooth criminal by Michael Jackson
//-- Released under a GPL licencse (http://ottodiy.com)
//-- Originally made for Zowi project remake for Otto DIY
//-- Authors:  Javier Isabel:  javier.isabel@bq.com
//--           Juan Gonzalez (obijuan): juan.gonzalez@bq.com
//-----------------------------------------------------------------
#include <Servo.h>
#include <Oscillator.h>
#include <EEPROM.h>

#define N_SERVOS 4
//-- First step: Configure the pins where the servos are attached
/*
         --------------- 
        |     O   O     |
        |---------------|
YR 3==> |               | <== YL 2
         --------------- 
            ||     ||
            ||     ||
RR 5==>   -----   ------  <== RL 4
         |-----   ------|
*/

#define TRIM_RR 6
#define TRIM_RL -3
#define TRIM_YR  9
#define TRIM_YL 3

#define PIN_RR 5
#define PIN_RL 4
#define PIN_YR 3
#define PIN_YL 2

#define INTERVALTIME 10.0 

Oscillator servo[N_SERVOS];


void setup() {
  servo[0].attach(PIN_RR);
  servo[1].attach(PIN_RL);
  servo[2].attach(PIN_YR);
  servo[3].attach(PIN_YL);
  
  servo[0].SetTrim(TRIM_RR);
  servo[1].SetTrim(TRIM_RL);
  servo[2].SetTrim(TRIM_YR);
  servo[3].SetTrim(TRIM_YL);
  
  
  for(int i=0;i<4;i++) servo[i].SetPosition(90);
}

void loop() {
}
```

Por medio de ensayo/error identificar los valores de `TRIM_RR`, `TRIM_RL`, `TRIM_YR` y `TRIM_YL` que hacen que las cuatro articulaciones queden perfectamente cuadradas.

Cargar el siguiente sketch para almacenar los valores obtenidos en la EEPROM:

```c
#include <EEPROM.h>
#define EEPROM_BASE_ADDRESS 0

#define TRIM_RR 6
#define TRIM_RL -3
#define TRIM_YR  9
#define TRIM_YL 3

void setup() {
  EEPROM.write(EEPROM_BASE_ADDRESS, TRIM_RR);
  EEPROM.write(EEPROM_BASE_ADDRESS+1, TRIM_RL);
  EEPROM.write(EEPROM_BASE_ADDRESS+2, TRIM_YR);
  EEPROM.write(EEPROM_BASE_ADDRESS+3, TRIM_YL);
}

void loop() {
}
```

A partir de entonces habrá que activar la opción que tienen los sketches para tomar los valores de trim de la EEPROM. Por ejemplo en el `Otto_smooth_criminal` hay que cambiar la línea 25:

```
#define EEPROM_TRIM true 
```